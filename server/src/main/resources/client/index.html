<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test page</title>
</head>
<body>
    test content
    <script>
        const url = "http://localhost:80"
        const req = new Request(url + "/create", {method: 'GET'})

        fetch(req).then(response => {
            response.text().then(value => {
                console.log("Joincode", value)
                const joinCode = value

                join(joinCode)
            })
        })

        function join(joinCode){
            const wsUrl = "ws://localhost:80/join/" + joinCode + "/name/timo"
            const ws = new WebSocket(wsUrl)

            ws.onopen = () => {
                console.log("websocket opened")
            }

            ws.onclose = (e) => {
                console.log(e)
                console.log("websocket closed")
            }

            ws.onmessage =() =>{
                console.log("message")
            }
        }


    </script>
</body>
</html>